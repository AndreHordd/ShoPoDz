<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>üìì –©–æ–¥–µ–Ω–Ω–∏–∫ | ShoPoDz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/parent.css') }}"
  />
</head>
<body>
  <div class="container">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <h2>üë™ –ë–∞—Ç—å–∫–∏</h2>
      <ul class="menu">
  <li><a href="{{ url_for('parent.parent_dashboard') }}">üè† –î–∞—à–±–æ—Ä–¥</a></li>
  <li><a href="{{ url_for('parent.parent_diary') }}">üìì –©–æ–¥–µ–Ω–Ω–∏–∫</a></li>
  <li><a href="{{ url_for('parent.parent_diary') }}#grades">üìä –û—Ü—ñ–Ω–∫–∏</a></li>
  <li><a href="{{ url_for('parent.parent_diary') }}#homework">üìö –î–æ–º–∞—à–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</a></li>
  <li><a href="{{ url_for('parent.parent_diary') }}#attendance">‚úÖ –í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—ñ—Å—Ç—å</a></li>
  <li><a href="{{ url_for('messenger.parent_messenger') }}">üì® –ú–µ—Å–µ–Ω–¥–∂–µ—Ä</a></li>
  <li><a href="#">üñäÔ∏è –ü—ñ–¥–ø–∏—Å–∏ –≤ —â–æ–¥–µ–Ω–Ω–∏–∫—É</a></li>
</ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content diary-content">
      <h1>
        üìì –©–æ–¥–µ–Ω–Ω–∏–∫: {{ student.first_name }} {{ student.last_name }}
      </h1>

      <!-- –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ —Ç–∏–∂–Ω—è—Ö -->
      <div class="week-nav">
        <a
          href="{{ url_for('parent.parent_diary', week_start=prev_week) }}"
          class="btn btn-nav"
          >‚Üê –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ç–∏–∂–¥–µ–Ω—å</a
        >
        <span class="week-range"
          >{{ week_start.strftime('%d.%m.%Y') }} ‚Äî
          {{ week_end.strftime('%d.%m.%Y') }}</span
        >
        <a
          href="{{ url_for('parent.parent_diary', week_start=next_week) }}"
          class="btn btn-nav"
          >–ù–∞—Å—Ç—É–ø–Ω–∏–π —Ç–∏–∂–¥–µ–Ω—å ‚Üí</a
        >
      </div>

      <!-- –∫–Ω–æ–ø–∫–∞ / —ñ–Ω—Ñ–æ –æ–∑–Ω–∞–π–æ–º–ª–µ–Ω–Ω—è -->
      {% if not acknowledged %}
      <div class="ack-container">
        <form action="{{ url_for('parent.parent_diary_ack') }}" method="post">
          <button
            type="submit"
            class="btn ack-btn"
            {% if acknowledged %}disabled{% endif %}
          >
            üëÅ –Ø –æ–∑–Ω–∞–π–æ–º–∏–≤—Å—è(–ª–∞—Å—å)
          </button>
        </form>
      </div>
      {% else %}
      <div class="alert alert-success ack-info">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-check-circle-fill"
          viewBox="0 0 16 16"
        >
          <path
            d="M16 8A8 8 0 11. . ."
          />
        </svg>
        –í–∏ –æ–∑–Ω–∞–π–æ–º–∏–ª–∏—Å—å:
        {{ acknowledged.strftime('%d.%m.%Y %H:%M') }}
      </div>
      {% endif %}

      <!-- –¥–Ω—ñ —Ç–∏–∂–Ω—è -->
      {% for day in diary %}
      <section class="day-block mb-5">
        <h3>
          {{
            ["","–ü–æ–Ω–µ–¥—ñ–ª–æ–∫","–í—ñ–≤—Ç–æ—Ä–æ–∫","–°–µ—Ä–µ–¥–∞",
              "–ß–µ—Ç–≤–µ—Ä","–ü º—è—Ç–Ω–∏—Ü—è","–°—É–±–æ—Ç–∞","–ù–µ–¥—ñ–ª—è"][day.date.isoweekday()]
          }}
          ‚Äî {{ day.date.strftime('%d.%m.%Y') }}
        </h3>

        {% if day.lessons %}
        <table class="table mb-3">
          <thead>
            <tr>
              <th>–ß–∞—Å</th>
              <th>–ö–ª–∞—Å</th>
              <th>–ü—Ä–µ–¥–º–µ—Ç</th>
              <th>–î–æ–º. –∑–∞–≤–¥–∞–Ω–Ω—è</th>
              <th>–û—Ü—ñ–Ω–∫–∏</th>
              <th>–í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—ñ—Å—Ç—å</th>
            </tr>
          </thead>
          <tbody>
            {% for item in day.lessons %}
            <tr>
              <td>
                {{ item.lesson.start_time.strftime('%H:%M') }}‚Äì{{
                item.lesson.end_time.strftime('%H:%M') }}
              </td>
              <td>
                {{ item.lesson.class_.class_number
                   }}{{ item.lesson.class_.subclass }}
              </td>
              <td>{{ item.lesson.subject.title }}</td>
              <td>
                {% if item.homework %}{{ item.homework.description }}{% else %}‚Äî{%
                endif %}
              </td>
              <td>
                {% if item.grades %}
                {% for g in item.grades %}
                {{ g.grade_value }}{% if not loop.last %}, {% endif %}
                {% endfor %}
                {% else %}‚Äî{% endif %}
              </td>
              <td>
                {% if item.attendance %}{{ item.attendance.status }}{% else %}‚Äî{%
                endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <p>–ù–∞ —Ü–µ–π –¥–µ–Ω—å —É—Ä–æ–∫—ñ–≤ –Ω–µ–º–∞—î.</p>
        {% endif %}
      </section>
      {% endfor %}
    </main>
  </div>
</body>
</html>
