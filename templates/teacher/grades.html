<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>üìí –û—Ü—ñ–Ω–∫–∏ | ShoPoDz</title>
  <link rel="stylesheet" href="{{ url_for('static',filename='css/grades.css') }}">
</head>
<body data-week-start="{{ week_start.isoformat() }}">
  <div class="container">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <h2>üë®‚Äçüè´ –í—á–∏—Ç–µ–ª—å</h2>
      <ul class="menu">
        <li><a href="{{ url_for('teacher_schedule') }}">üìÖ –ú—ñ–π —Ä–æ–∑–∫–ª–∞–¥</a></li>
        <li><a href="{{ url_for('teacher.classes') }}">üë®‚Äçüéì –ú–æ—ó –∫–ª–∞—Å–∏</a></li>
        <li><a href="{{ url_for('grade.teacher_grades') }}">üìä –û—Ü—ñ–Ω–∫–∏</a></li>
        <li><a href="{{ url_for('homework.teacher_homework') }}">üìö –î–æ–º–∞—à–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</a></li>
        <li><a href="{{ url_for('attendance_bp.teacher_attendance') }}">‚úÖ –í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—ñ—Å—Ç—å</a></li>
        <li><a href="#">üìñ –ñ—É—Ä–Ω–∞–ª —É—á–Ω—è</a></li>
        <li><a href="{{ url_for('messenger.teacher_messenger') }}">üì® –ú–µ—Å–µ–Ω–¥–∂–µ—Ä</a></li>
        <li><a href="#">üñäÔ∏è –ü—ñ–¥–ø–∏—Å–∏ –≤ —â–æ–¥–µ–Ω–Ω–∏–∫—É</a></li>
      </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="grades-content">
      <div class="hw-header" style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 16px;">
        <button id="prev-week" style="font-size: 19px;">‚Üê</button>
        <span style="font-weight:500;">{{ week_start }} ‚Äî {{ week_end }}</span>
        <button id="next-week" style="font-size: 19px;">‚Üí</button>
      </div>

      {% set weekday_names = {
        0: '–ü–æ–Ω–µ–¥—ñ–ª–æ–∫',
        1: '–í—ñ–≤—Ç–æ—Ä–æ–∫',
        2: '–°–µ—Ä–µ–¥–∞',
        3: '–ß–µ—Ç–≤–µ—Ä',
        4: "–ü º—è—Ç–Ω–∏—Ü—è",
        5: '–°—É–±–æ—Ç–∞',
        6: '–ù–µ–¥—ñ–ª—è'
      } %}
      {% for day in grades_data %}
        {% if day.lessons %}
          <h4 style="margin:16px 0 8px; color:#176dde; font-weight:600;">
            {{ weekday_names[day.date.weekday()] }}, {{ day.date.strftime('%d.%m') }}
          </h4>
          <table class="hw-table">
            <thead>
              <tr>
                <th>–ö–ª–∞—Å</th>
                <th>–£—Ä–æ–∫</th>
                <th>–í–∏—Å—Ç–∞–≤–ª–µ–Ω—ñ –æ—Ü—ñ–Ω–∫–∏</th>
                <th>–î—ñ—ó</th>
              </tr>
            </thead>
            <tbody>
              {% for item in day.lessons %}
                <tr>
                  <td>{{ item.lesson.class_.class_number }}{{ item.lesson.class_.subclass }}</td>
                  <td>{{ item.lesson.subject.title }}</td>
                  <td>{{ item.grades|length }} / {{ item.class_size }}</td>
                  <td>
                    <button class="set-grade-btn"
                            data-lesson="{{ item.lesson.lesson_id }}"
                            data-class="{{ item.lesson.class_id }}"
                            data-date="{{ item.date.isoformat() }}">
                      üè∑ –í–∏—Å—Ç–∞–≤–∏—Ç–∏
                    </button>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% endif %}
      {% endfor %}
    </main>
  </div>
  <script src="{{ url_for('static',filename='js/grades.js') }}"></script>
</body>
</html>
